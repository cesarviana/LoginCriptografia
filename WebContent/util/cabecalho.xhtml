<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">
<h:body>
	<h:form>
		<p:growl id="msg" />

		<p:menubar autoDisplay="false" rendered="#{loginBean.login != null}">

			<p:menuitem value="Home" icon="ui-icon-home"
				url="https://localhost:8443/LoginCriptografia/default/index.xhtml" />

			<p:submenu rendered="#{loginBean.admin}" label="Cadastros">
				<p:menuitem value="Table Bean" url="/default/tablebean.xhtml" />
				<p:menuitem value="Table Bean 2" url="/default/tablebean2.xhtml" />
				<p:menuitem value="Table Bean 3" url="/default/tablebean3.xhtml" />
			</p:submenu>

			<p:submenu label="#{loginBean.login}" style="float:right; positio:relative; right:10px;">
				<p:menuitem value="Alterar senha" onclick="PF('dialog').show()" />
				<p:menuitem action="#{loginBean.sair}" value="Sair" />
			</p:submenu>
		</p:menubar>
	
	</h:form>
	<h:form id="form-dialog">
		<p:growl id="msg2" />
		<p:dialog widgetVar="dialog" resizable="false" header="Alterar senha" showEffect="fold" hideEffect="fold">

			<h:panelGrid columns="2" cellspacing="6">

				<p:outputLabel value="Informe a senha atual" />
				<p:inputText value="#{configuracoesUsuarioBean.senha}"
					type="password" required="true"
					requiredMessage="Informe a senha atual">
					<f:validateLength minimum="7" />
				</p:inputText>

				<p:outputLabel value="Informe a nova senha" />
				<p:inputText value="#{configuracoesUsuarioBean.novaSenha}"
					type="password" required="true"
					requiredMessage="Informe a nova senha">
					<f:validateLength minimum="7" />
				</p:inputText>

				<p:outputLabel value="Confirme a nova senha" />
				<p:inputText value="#{configuracoesUsuarioBean.confSenha}"
					type="password" required="true"
					requiredMessage="Confirme a nova senha">
					<f:validateLength minimum="7" />
				</p:inputText>

			</h:panelGrid>
			
			<f:facet name="footer">
				<p:commandButton value="Salvar" 
					action="#{configuracoesUsuarioBean.redefinirSenha}" update="msg2"/>
			</f:facet>
			
		</p:dialog>

	</h:form>
</h:body>
</html>